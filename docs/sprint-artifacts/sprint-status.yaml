# generated: 2025-12-09
# project: boletapp
# project_key: boletapp
# tracking_system: file-system
# story_location: docs/sprint-artifacts

# STATUS DEFINITIONS:
# ==================
# Epic Status:
#   - backlog: Epic exists in epic file but not contexted
#   - contexted: Next epic tech context created by *epic-tech-context (required)
#
# Story Status:
#   - backlog: Story only exists in epic file
#   - drafted: Story file created in stories folder by *create-story
#   - ready-for-dev: Draft approved and story context created by *story-ready
#   - in-progress: Developer actively working on implementation by *dev-story
#   - review: Implementation complete, ready for review by *code-review
#   - done: Story completed by *story-done
#
# Retrospective Status:
#   - optional: Can be completed but not required
#   - completed: Retrospective has been done by *retrospective
#
# WORKFLOW NOTES:
# ===============
# - Epics should be 'contexted' before stories can be 'drafted'
# - SM typically drafts next story ONLY after previous one is 'done' to incorporate learnings
# - Dev moves story to 'review', dev reviews, then Dev moves to 'done'

generated: 2025-12-09
project: boletapp
project_key: boletapp
tracking_system: file-system
story_location: docs/sprint-artifacts

development_status:
  epic-1: docs/sprint-artifacts/sprint-status_epics1to13.yaml
  epic-2: docs/sprint-artifacts/sprint-status_epics1to13.yaml
  epic-3: docs/sprint-artifacts/sprint-status_epics1to13.yaml
  epic-4: docs/sprint-artifacts/sprint-status_epics1to13.yaml
  epic-5: docs/sprint-artifacts/sprint-status_epics1to13.yaml
  epic-6: docs/sprint-artifacts/sprint-status_epics1to13.yaml
  epic-7: docs/sprint-artifacts/sprint-status_epics1to13.yaml
  epic-8: docs/sprint-artifacts/sprint-status_epics1to13.yaml
  epic-9: docs/sprint-artifacts/sprint-status_epics1to13.yaml
  epic-10: docs/sprint-artifacts/sprint-status_epics1to13.yaml
  epic-11: docs/sprint-artifacts/sprint-status_epics1to13.yaml
  epic-12: docs/sprint-artifacts/sprint-status_epics1to13.yaml
  epic-13: docs/sprint-artifacts/sprint-status_epics1to13.yaml
  epic-14: docs/sprint-artifacts/sprint-status_epics1to13.yaml
  epic-14c: docs/sprint-artifacts/sprint-status_epics1to13.yaml
  epic-14d: docs/sprint-artifacts/sprint-status_epics1to13.yaml
  epic-14e: docs/sprint-artifacts/sprint-status_epics1to13.yaml

  # ============================================================================
  # EPIC 14d-v2: SHARED GROUPS V2 (~138 points across 4 sub-epics)
  # ============================================================================
  # Rebuild shared groups from scratch with lessons learned from Epic 14c
  # Key changes: Single sharedGroupId (not array), changelog-driven sync,
  # double-gate privacy model, manual sync buttons, server-side analytics
  # Epic Document: docs/sprint-artifacts/epic14d-shared-groups-v2/epics.md
  # Architecture: docs/architecture/epic-14d-requirements-and-concerns.md
  # Created: 2026-01-22 from Epic 14c retrospective
  epic-14d-v2-shared-groups: contexted  # INITIALIZED 2026-02-01 - Architecture review pending

  # Sub-Epic 0: Architecture Alignment (1 story, ~3 pts) - Added 2026-02-01
  # Pre-requisite: Align Epic 14d-v2 with Epic 14e Zustand patterns (ADR-018)
  # See: docs/sprint-artifacts/epic14d-shared-groups-v2/14d-v2-architecture-alignment-plan.md
  14d-v2-0-architecture-alignment: done  # 3 pts - Create useViewModeStore, feature directory, migrate consumers - Atlas Code Review APPROVED 2026-02-01

  # Sub-Epic 1: Data Model & Group Foundation (14→18 stories after splits, consolidated to 2 remaining, ~50 pts)
  # Story sizing updated 2026-02-05: Opus 4.6 handles ~3x context of previous models
  # 5 remaining stories (1-13, 1-14a/b/c/d) consolidated into 2 (1-13+14, 1-14-polish)
  14d-v2-1-1-legacy-cleanup: done  # 2-3 pts (reduced) - Remove Epic 14c code, preserve UI shells - Atlas Code Review APPROVED 2026-02-01
  14d-v2-1-2-transaction-type-migration: split  # SPLIT 2026-02-01: 6 tasks, 35 subtasks exceeded limits → split into 14d-v2-1-2a/b/c
  14d-v2-1-2a-transaction-types-periods: done  # 2 pts - Types + computePeriods utility [Part 1/3] - Atlas Code Review APPROVED 2026-02-01 (26 tests)
  14d-v2-1-2b-transaction-service-layer: done  # 2 pts - Firestore save/update + normalization [Part 2/3] - Atlas Code Review APPROVED 2026-02-01 (22 tests, 4 fixes applied)
  14d-v2-1-2c-transaction-queries-tests: done  # 2 pts - Query updates + test maintenance [Part 3/3, DEPENDS: 1-2b] - Atlas Code Review APPROVED 2026-02-01
  14d-v2-1-3-changelog-infrastructure: split  # SPLIT 2026-02-01: 5 tasks, 27 subtasks exceeded limits → split into 14d-v2-1-3a/b/c
  14d-v2-1-3a-changelog-types: done  # 2 pts - TypeScript types for changelog [Part 1/3, DEPENDS: none] - Atlas Code Review APPROVED 2026-02-01 (25 tests)
  14d-v2-1-3b-changelog-security-rules: done  # 2 pts - Security rules + TTL config [Part 2/3, PARALLEL: 1-3a] - Atlas Code Review APPROVED 2026-02-01 (10 tests, 5 fixes applied)
  14d-v2-1-3c-changelog-service-tests: done  # 2 pts - Service function + tests [Part 3/3, DEPENDS: 1-3a, 1-3b] - Atlas Code Review APPROVED 2026-02-01 (29 tests)
  14d-v2-1-4-create-shared-group: split  # SPLIT 2026-02-01: 8 tasks, 42 subtasks exceeded limits → split into 14d-v2-1-4a/b/c/d
  14d-v2-1-4a-types-security-rules: done  # 2 pts - Types + Firestore security rules [Part 1/4, DEPENDS: none] - Atlas Code Review APPROVED 2026-02-01 (12 tests, 2 MEDIUM fixes)
  14d-v2-1-4b-service-hook-layer: done  # 2 pts - Group service + useGroups hook [Part 2/4, DEPENDS: 1-4a] - Atlas Code Review APPROVED 2026-02-01 (66 tests, getCountFromServer optimization)
  14d-v2-1-4c-ui-components: split  # SPLIT 2026-02-01: Proactive sizing reduction → split into 14d-v2-1-4c-1, 14d-v2-1-4c-2
  14d-v2-1-4c-1-core-dialog: done  # 2 pts - Core dialog UI + entry point [Part 1/2, DEPENDS: 1-4b] - Atlas Code Review APPROVED 2026-02-01 (31 tests)
  14d-v2-1-4c-2-enhanced-features: done  # 2 pts - Toast/discard/navigation + BC-1 limit UI [Part 2/2, DEPENDS: 1-4c-1] - Atlas Code Review APPROVED 2026-02-02 (git staging fixed, 6451 tests)
  14d-v2-1-4d-integration-testing: done  # 1 pt - E2E + validation tests [Part 4/4, DEPENDS: 1-4c-2] - Atlas Code Review APPROVED 2026-02-02 (82 tests, E2E doc fixed)
  14d-v2-1-5-invite-members: split  # SPLIT 2026-02-01: 8 tasks, 42 subtasks exceeded limits → split into 14d-v2-1-5a/b/c
  14d-v2-1-5a-invitation-foundation: done  # 2 pts - Types + utils (PendingInvitation, shareCode, validateEmail) [Part 1/3] - Atlas Code Review APPROVED 2026-02-02 (70 tests, 4 fixes: staging + File List)
  14d-v2-1-5b-invitation-backend: split  # SPLIT 2026-02-01: 18 subtasks exceeded limit → split into 14d-v2-1-5b-1, 14d-v2-1-5b-2
  14d-v2-1-5b-1-core-invitation-service: done  # 2 pts - Core service functions [Part 2a/3, DEPENDS: 1-5a] - Atlas Code Review APPROVED 2026-02-02 (47 tests, 5 fixes: staging + sanitization)
  14d-v2-1-5b-2-validation-security: done  # 2 pts - Validation + security rules [Part 2b/3, DEPENDS: 1-5b-1] - Atlas Code Review APPROVED 2026-02-02 (72 unit + 12 rules tests, 4 fixes: staging)
  14d-v2-1-5c-invitation-ui: done  # 2 pts - InviteMembersDialog + integration tests [Part 3/3, DEPENDS: 1-5a, 1-5b-1, 1-5b-2] - Atlas Code Review APPROVED 2026-02-02 (47 tests, 6 fixes: a11y + React 17 compliance)
  14d-v2-1-6-accept-decline-invitation: split  # SPLIT 2026-02-01: 13 tasks, 74 subtasks exceeded limits → split into 14d-v2-1-6a/b/c/d/e
  14d-v2-1-6a-deep-link-pending-service: done  # 2 pts - Deep link handler + pending invitations service [Part 1/5, DEPENDS: 1-5] - Atlas Code Review APPROVED 2026-02-02 (119 tests, 3 fixes: staging)
  14d-v2-1-6b-accept-decline-logic: done  # 2 pts - Accept/decline logic + validation [Part 2/5, DEPENDS: 1-6a] - Atlas Code Review APPROVED 2026-02-02 (128 tests, 6 fixes: staging + sanitization)
  14d-v2-1-6c-invitations-ui: split  # SPLIT 2026-02-01: 18 subtasks exceeded limit → split into 14d-v2-1-6c-1, 14d-v2-1-6c-2
  14d-v2-1-6c-1-badge-list: done  # 2 pts - Badge + invitations list UI [Part 1/2, DEPENDS: 1-6a, 1-6b] - Atlas Code Review APPROVED 2026-02-02
  14d-v2-1-6c-2-accept-dialog: done  # 2 pts - Accept invitation dialog [Part 2/2, DEPENDS: 1-6c-1] - Atlas Code Review APPROVED 2026-02-02 (41 tests, 3 fixes: staging + pluralization)
  14d-v2-1-6d-optin-error-ui: done  # 2 pts - Transaction sharing opt-in + error views [Part 4/5, DEPENDS: 1-6b, 1-6c-2]
  14d-v2-1-6e-security-rules-tests: done  # 2 pts - Security rules + preferences + E2E tests [Part 5/5, DEPENDS: 1-6a-d] - Atlas Code Review APPROVED 2026-02-02 (8 security rules + 16 unit + 7 E2E tests, 1 fix: staging)
  14d-v2-1-7-leave-manage-group: split  # SPLIT 2026-02-01: 11 tasks, 69 subtasks, 12+ files exceeded limits → split into 14d-v2-1-7a/b/c/d/e/f/g
  14d-v2-1-7a-leave-transfer-service: done  # 2 pts - Leave + ownership transfer service functions [Part 1/7, DEPENDS: none] - ECC Review 2026-02-02
  14d-v2-1-7b-deletion-service: done  # 2 pts - Last member + owner deletion service [Part 2/7, DEPENDS: 1-7a] - ECC Review 2026-02-02: APPROVED (2 HIGH fixes applied)
  14d-v2-1-7c-cloud-function-member-leave: done  # 2 pts - Cloud Function for TRANSACTION_REMOVED changelog [Part 3/7, DEPENDS: 1-3, 1-7a] - ECC Parallel Review 2026-02-02: APPROVED (npm audit fixed, 23 tests pass)
  14d-v2-1-7d-leave-transfer-ui: done  # 3 pts - Leave/Transfer dialogs + view mode auto-switch [Part 4/7, DEPENDS: 1-7a, 14d-v2-0] - ECC Code Review APPROVED 2026-02-02 (10 fixes: 3 HIGH, 4 MEDIUM, 2 LOW + test updates)
  14d-v2-1-7e-delete-ui-security-rules: done  # 2 pts - Delete dialog + Firestore security rules [Part 5/7, DEPENDS: 1-7b] - ECC Parallel Review 2026-02-03: APPROVED (8.9/10)
  14d-v2-1-7f-integration-tests: done  # 2 pts - E2E integration tests [Part 6/7, DEPENDS: 1-7a through 1-7e] - ECC Parallel Review #2 APPROVED (8.5/10) - DRY items deferred to TD-14d-8
  14d-v2-1-7g-edit-group-settings: done  # 3 pts - Edit group name/icon/color (owner-only) [Part 7/7, DEPENDS: 1-4] - ECC Parallel Review 2026-02-03: APPROVED (8.6/10, fixes: error toast, icon CSS, translations, E2E tests added)
  14d-v2-1-8-cloud-function-changelog-writer: split  # SPLIT 2026-02-01: 11 tasks, 45 subtasks exceeded limits → split into 14d-v2-1-8a/b/c/d
  14d-v2-1-8a-changelog-writer-foundation: done  # 2 pts - Core function + change detection + idempotency + entry creation [Part 1/4] - ECC Parallel Review 2026-02-03: APPROVED (31 tests, 8.3/10, 4 TD stories created)
  14d-v2-1-8b-changelog-writer-validation: done  # 2 pts - Ownership + group membership validation + batch writing [Part 2/4, DEPENDS: 1-8a] - ECC Parallel Review 2026-02-04: APPROVED (42 tests, 8.25/10, batch writing + sanitization)
  14d-v2-1-8c-changelog-writer-logging-export: done  # 1 pt - Structured logging + index export [Part 3/4, DEPENDS: 1-8b] - ECC Parallel Review 2026-02-04: APPROVED (53 tests, 8.0/10 code + LOW security)
  14d-v2-1-8d-changelog-writer-tests-deploy: done  # 2 pts - Unit tests + deployment verification [Part 4/4, DEPENDS: 1-8c] - ECC Parallel Review 2026-02-04: APPROVED (8.25/10, 57 tests, 0 CRITICAL/HIGH)
  14d-v2-1-9-firestore-ttl-offline: done  # 2 pts - 30-day TTL, offline persistence - ECC Parallel Review 2026-02-04: APPROVED (9.1/10) - 74 tests, all fixes verified, 3 TD stories created
  # Story 1.10: SUPERSEDED 2026-02-01 - Split into 4 sub-stories for Epic 14e alignment
  14d-v2-1-10-view-mode-switcher: superseded  # SUPERSEDED - Split into 1.10a-d per architecture alignment
  14d-v2-1-10a-viewmode-store-integration: done  # 2 pts - Wire useViewModeStore to ViewModeSwitcher [DEPENDS: 14d-v2-0] - ECC Parallel Review 2026-02-04: APPROVED (9.1/10, 2 TD stories created)
  14d-v2-1-10b-viewmodeswitcher-ui: done  # 3 pts - Enable group list, remove "Coming soon" [DEPENDS: 14d-v2-1.10a, 1.4, 1.6] - ECC Review #2 2026-02-04: ✅ APPROVED (9.4/10)
  14d-v2-1-10c-header-mode-indicator: done  # 2 pts - Header visual indicator + logo tap [DEPENDS: 14d-v2-1.10b] - ECC Parallel Review 2026-02-04: APPROVED (9.25/10, 3 TD stories)
  14d-v2-1-10d-data-filtering-integration: done  # 3 pts - Filter all views by mode, clear filters on switch [DEPENDS: 14d-v2-1.10c, 1.2] - ECC Parallel Review 2026-02-04: APPROVED (9.5/10, 6 TD stories)
  14d-v2-1-11-transaction-sharing-toggle-group: split  # SPLIT 2026-02-01: 6 tasks, 28 subtasks, 12 files exceeded limits → split into 14d-v2-1-11a/b/c
  14d-v2-1-11a-foundation-types-cooldown: done  # 2 pts - Types + cooldown utility [Part 1/3, DEPENDS: none] - ECC Parallel Review 2026-02-04: APPROVED (9.5/10, 2 TD stories created)
  14d-v2-1-11b-service-layer-security: done  # 2 pts - Firestore service + security rules [Part 2/3, DEPENDS: 1-11a] - ECC Parallel Review 2026-02-04: APPROVED (9.2/10, 9 TD stories created)
  14d-v2-1-11c-ui-components-integration: done  # 2 pts - Toggle UI + Settings integration [Part 3/3, DEPENDS: 1-11a, 1-11b] - ECC Parallel Review 2026-02-04: APPROVED (8.5/10 Code, PASS Security) - Task 2 integration + E2E complete
  14d-v2-1-12-user-transaction-sharing-preference: split  # SPLIT 2026-02-01: 8 tasks, 34 subtasks, 8 files exceeded limits → split into 14d-v2-1-12a/b/c/d
  14d-v2-1-12a-foundation-types-cooldown: done  # 2 pts - Types + cooldown utility [Part 1/4, DEPENDS: none] - ECC Parallel Review #2 2026-02-05: APPROVED (8.5/10, 4 TD stories)
  14d-v2-1-12b-service-layer-security: done  # 2 pts - Firestore service + security rules [Part 2/4, DEPENDS: 1-12a] - ECC Review 2026-02-05: ALL FIXES APPLIED (53 tests, 10/10 action items complete)
  14d-v2-1-12c-ui-component-hook: done  # 2 pts - Toggle component + hook [Part 3/4, DEPENDS: 1-12a, 1-12b] - ECC Parallel Review #3 2026-02-05: APPROVED (8.5/10, 0 blockers)
  14d-v2-1-12d-integration-cleanup: done  # 2 pts - Settings integration + leave cleanup [Part 4/4, DEPENDS: 1-12c] - ECC Parallel Review #3 2026-02-05: APPROVED (9/10 resolved, 86 tests pass) - All HIGH/MEDIUM/LOW fixes applied
  # CONSOLIDATED 2026-02-05: Stories 1-13, 1-14a/b/c/d merged into 2 stories (Opus 4.6 sizing)
  # Original 5 stories (11 pts) -> 2 consolidated stories (11 pts), same scope, fewer context switches
  14d-v2-1-13-user-group-preferences-document: consolidated  # CONSOLIDATED into 14d-v2-1-13+14 (2026-02-05)
  14d-v2-1-14-join-flow-opt-in: consolidated  # CONSOLIDATED into 14d-v2-1-13+14 + 14d-v2-1-14-polish (2026-02-05)
  14d-v2-1-14a-dialog-component: consolidated  # CONSOLIDATED into 14d-v2-1-13+14 (2026-02-05)
  14d-v2-1-14b-service-flow-integration: consolidated  # CONSOLIDATED into 14d-v2-1-13+14 (2026-02-05)
  14d-v2-1-14c-polish-edge-cases: consolidated  # CONSOLIDATED into 14d-v2-1-14-polish (2026-02-05)
  14d-v2-1-14d-integration-tests: consolidated  # CONSOLIDATED into 14d-v2-1-14-polish (2026-02-05)
  # New consolidated stories:
  14d-v2-1-13+14-join-flow-foundation: done  # 7 pts - ECC Review APPROVED (2026-02-07): code 8.5/10, security 9/10, architect 9/10, TDD 85/100. 4 quick fixes applied, 5 complex items deferred to TD-CONSOLIDATED-2/4/8
  14d-v2-1-14-polish-e2e: done  # 4 pts - Confirmation toasts + offline handling + analytics + E2E tests [DEPENDS: 1-13+14] - ECC Review #3 2026-02-07: APPROVED (9/10, TRIVIAL classification, 1 quick fix applied)

  # ============================================================================
  # TECH DEBT - CONSOLIDATED (Epic 14d-v2)
  # ============================================================================
  # Consolidated 2026-02-05 from 57+ individual TD stories into 15 actionable items
  # Plan: docs/sprint-artifacts/epic14d-shared-groups-v2/TD-CONSOLIDATED-PLAN.md
  # Archived originals: stories/TD-ARCHIVED/
  # Completed pre-consolidation:
  TD-14d-1-zustand-migration: done  # COMPLETED 2026-02-03
  TD-14d-2-fsd-component-location: done  # COMPLETED 2026-02-03

  # TIER 1: Code Bloat Prevention (MUST DO) - 11-16 hrs
  TD-CONSOLIDATED-1-groupservice-modularization: done  # 4-6 hrs - Split 1,509 LOC into 4 modules [from: TD-14d-4] - ECC Code Review 2026-02-07: APPROVED (8/10, 8 quick fixes applied, 3 complex deferred to TD-17/18)
  TD-CONSOLIDATED-2-gruposview-dialog-extraction: done  # 2-3 hrs - Extract dialog rendering to GruposViewDialogs.tsx [from: TD-14d-3, DEPENDS: TD-CONSOLIDATED-1] - ECC Code Review 2026-02-08: APPROVED (8.5/10, 2 quick fixes applied, 1 TD story created: TD-19)
  TD-CONSOLIDATED-3-dry-utilities-extraction: done  # 3-4 hrs - Transaction merge, ViewMode type consolidation, shared test factory [from: TD-14d-30, 33, 34] - ECC Code Review 2026-02-08: APPROVED (9/10, 3 quick fixes applied, 0 blockers)
  TD-CONSOLIDATED-4-cooldown-core-extraction: done  # 2-3 hrs - Extract ~80% duplicated cooldown logic to cooldownCore.ts [from: TD-14d-48 core, 36] - ECC Code Review 2026-02-08: APPROVED (9/10, 4 quick fixes applied, 100 tests pass)

  # TIER 2: Security (SHOULD DO) - 4-7 hrs
  TD-CONSOLIDATED-5-invitation-read-restriction: done  # 2-3 hrs - Restrict pendingInvitations read to email match [from: TD-14d-5] - ECC Code Review 2026-02-08: APPROVED (8/10, 6 quick fixes applied, 0 blockers)
  TD-CONSOLIDATED-6-groupid-validation: done  # 1-2 hrs - Validate groupId before Firestore field paths [from: TD-14d-55] - ECC Code Review 2026-02-08: APPROVED (7.5/10, 5 quick fixes applied, 1 TD story created: TD-20)
  TD-CONSOLIDATED-7-css-color-injection-validation: in-progress  # 1-2 hrs - Validate group.color before CSS injection [from: TD-14d-28]

  # TIER 3: Test Quality (DO WHEN TOUCHING) - 4-6 hrs
  TD-CONSOLIDATED-8-test-infrastructure-cleanup: ready-for-dev  # 4-6 hrs - DRY test helpers, type safety, naming conventions [from: TD-14d-8, 31, 34, 35, 37, 49]

  # TIER 4: Documentation (DO WHEN NEEDED) - 2-3 hrs
  TD-CONSOLIDATED-9-adr-documentation: ready-for-dev  # 2-3 hrs - Client-side filtering ADR-021, rate limiting ADR [from: TD-14d-32, 38]

  # TIER 5: Technical Improvements (BACKLOG) - 12-17 hrs optional
  TD-CONSOLIDATED-10-toctou-atomic-transactions: ready-for-dev  # 2-3 hrs - Wrap membership validation in Firestore transaction [from: TD-14d-11] - ECC Story Created 2026-02-08 (Planner + Architect)
  TD-CONSOLIDATED-11-server-side-rate-limiting: ready-for-dev  # 3-4 hrs - Rate limiting for destructive operations [from: TD-14d-6, 39] - ECC Story Created 2026-02-08 (Planner + Architect)
  TD-CONSOLIDATED-12-react-query-cache-staleness: ready-for-dev  # 3-4 hrs - Fix optimistic cache update [from: TD-14d-47] - ECC Story Created 2026-02-08 (Planner + Architect, upgraded to 5 pts MEDIUM)
  TD-CONSOLIDATED-13-dialog-focus-management: ready-for-dev  # 3-4 hrs - Consistent focus cleanup across dialogs [from: TD-14d-17, 18] - ECC Story Created 2026-02-08 (Planner + Architect, upgraded to 3 pts MEDIUM)
  TD-CONSOLIDATED-14-cloud-function-type-sync-ci: ready-for-dev  # 1-2 hrs - CI validation for type synchronization [from: TD-14d-9] - ECC Story Created 2026-02-08 (Planner + Architect, 1 pt XS)
  TD-CONSOLIDATED-15-dependency-vulnerability-tracking: ready-for-dev  # 1-2 hrs - npm audit remediation [from: TD-14d-7]

  # Added from TD-CONSOLIDATED-1 code review (2026-02-07)
  TD-CONSOLIDATED-17-deletion-cascade-dry: ready-for-dev  # 1-2 hrs - Extract duplicated cascade cleanup helper in groupDeletionService [from: TD-CONSOLIDATED-1 review #5, DEPENDS: TD-CONSOLIDATED-1]
  TD-CONSOLIDATED-18-group-service-validation-gaps: ready-for-dev  # 1-2 hrs - photoURL URL validation + createGroup BC-1 atomicity [from: TD-CONSOLIDATED-1 review #9/#10]

  # Added from TD-CONSOLIDATED-2 code review (2026-02-08)
  TD-CONSOLIDATED-19-handler-error-coverage: ready-for-dev  # 1-2 hrs - Re-thrown errors + handleToggleTransactionSharing test coverage [from: TD-CONSOLIDATED-2 review #1/#2, DEPENDS: TD-CONSOLIDATED-2]

  # Added from TD-CONSOLIDATED-6 code review (2026-02-08)
  TD-CONSOLIDATED-20-cloud-functions-groupid-validation: ready-for-dev  # 1 hr - Align Cloud Functions isValidGroupId() regex with client-side validateGroupId() [from: TD-CONSOLIDATED-6 review #4]

  # ARCHIVED (42+ items) - Fix inline if encountered, not tracked individually
  # See: stories/TD-ARCHIVED/ and TD-CONSOLIDATED-PLAN.md for full archive list
  # Also archived (no story files): TD-7d-5, TD-7d-6 (deferred, depends on cloud function)

# /ecc-dev-story
# /ecc-code-review
# /ecc-create-story
# /deploy-story
# /story-sizing
# /ecc-e2e
# /ecc-impact-analysis
# /design-system-mockup-builder

  # Sub-Epic 2: Changelog-Driven Sync (12 stories, ~45 pts)
  14d-v2-2-1-tag-transaction-to-group: backlog  # 3 pts - Assign sharedGroupId
  14d-v2-2-2-view-group-transactions: backlog  # 5 pts - Double-gate visibility
  14d-v2-2-3-90-day-changelog-sync: backlog  # 5 pts - Changelog-driven sync
  14d-v2-2-4-sync-button-cooldown: backlog  # 3 pts - 1min×3, then 15min
  14d-v2-2-5-pending-changes-badge: backlog  # 2 pts - Red dot indicator
  14d-v2-2-6-full-2-year-recovery-sync: backlog  # 3 pts - Settings recovery
  14d-v2-2-7-freshness-indicator: backlog  # 2 pts - "Last synced: X ago"
  14d-v2-2-8-offline-banner: backlog  # 2 pts - "Showing cached data"
  14d-v2-2-9-optimistic-updates-writer: backlog  # 3 pts - Instant feedback
  14d-v2-2-10-multi-operation-sync-tests: backlog  # 8 pts - Prevent 14c regression
  14d-v2-2-11-cloud-function-visibility-filtering: backlog  # 5 pts - Double-gate enforcement
  14d-v2-2-12-sharing-disabled-empty-state: backlog  # 2 pts - Clear UX

  # Sub-Epic 3: Server-Side Analytics (10 stories, ~34 pts)
  14d-v2-3-1-analytics-document-structure: backlog  # 3 pts - /groups/{groupId}/analytics/*
  14d-v2-3-2-immediate-sum-count-updates: backlog  # 3 pts - FieldValue.increment()
  14d-v2-3-3-debounced-breakdown-calculation: backlog  # 3 pts - 30-sec debounce
  14d-v2-3-4-median-calculation-cooldown: backlog  # 3 pts - 30-min cooldown
  14d-v2-3-5-nightly-reconciliation: backlog  # 3 pts - 2 AM recalculation
  14d-v2-3-6-analytics-ui-by-category: backlog  # 5 pts - Category breakdown
  14d-v2-3-7-analytics-ui-by-member: backlog  # 5 pts - Member breakdown
  14d-v2-3-8-period-views: backlog  # 3 pts - Week/month/quarter/year
  14d-v2-3-9-owner-force-recalculate: backlog  # 3 pts - 3×/day, 5min cooldown
  14d-v2-3-10-refresh-countdown-indicator: backlog  # 2 pts - Time to next refresh

  # Sub-Epic 4: Notifications & Engagement (5 stories, ~12 pts)
  14d-v2-4-1-push-notification-infrastructure: backlog  # 3 pts - Transaction change notifications
  14d-v2-4-2-notification-content-formatting: backlog  # 2 pts - Clear messaging
  14d-v2-4-3-badge-trigger-on-notification: backlog  # 2 pts - No auto-sync
  14d-v2-4-4-notification-history-view: backlog  # 3 pts - In-app history
  14d-v2-4-5-notification-settings: backlog  # 2 pts - Per-group toggles

  epic-14d-v2-retrospective: optional

  # Epic 15: Advanced Features (~38 points - revised after mockup verification 2025-12-31)
  # Goals system, learned thresholds, out-of-character detection, treemap, themeable skins
  # Key features: Savings GPS, Emotional Airlock, Treemap, Themeable Skins (Sankey/Sharing REMOVED - not in mockups)
  # BLOCKED by Epic 14 - Requires animation framework and polygon
  # Atlas Feature Mapping: Goals system, Pattern detection, Treemap viz
  # Workflow Chains: Extends Insight Gen (#5), Analytics (#2)
  epic-15: backlog

  # Goals System (new feature area)
  15-1-custom-goals-crud: backlog  # 3 pts - Name, emoji, amount, currency [NEW FEATURE: Goals] [MOCKUP: goals-gps.html]
  15-2-savings-gps-visualization: backlog  # 5 pts - ETA, alternate routes [DEPENDS: 15.1] [MOCKUP: goals-gps.html]
  15-3-hybrid-income-mode: backlog  # 3 pts - Smart + Precision modes [NEW FEATURE: Income tracking]
  15-4-goal-connected-insights: backlog  # 3 pts - "Coffee = 1 day from Tokyo" [EXTENDS: Insight Gen #5]

  # Learned Behavior (extends Insight Engine)
  15-5-learned-budget-thresholds: backlog  # 3 pts - App suggests limits [EXTENDS: Insight Gen #5] [MOCKUP: goals-gps.html budget-limit]
  15-6-threshold-proximity-alerts: backlog  # 2 pts - 75%, 90%, 100% warnings [DEPENDS: 15.5]
  15-7-out-of-character-detection: backlog  # 5 pts - Pattern deviation [EXTENDS: Insight Gen #5]
  15-8-emotional-airlock-flow: backlog  # 3 pts - Curiosity → Playful → Reveal [DEPENDS: 15.7] [MOCKUP: insights.html airlock sequence]

  # Advanced Visualizations
  15-9-treemap-implementation: backlog  # 5 pts - Proportional breakdown [MOCKUP: analytics-polygon.html, home-dashboard.html]
  # REMOVED 15.9-Sankey (CSS defined but not rendered), 15.12-Sharing (not in mockups)

  # Engagement & Personalization
  15-10-monthly-milestone-view: backlog  # 3 pts - Progress celebrations [DEPENDS: 14.12] [MOCKUP: goals-gps.html milestone markers]
  15-11-themeable-skins: backlog  # 3 pts - 3 themes: Professional Blue, Mono, Ni No Kuni [MOCKUP: settings.html PALETA DE COLOR]

  epic-15-retrospective: optional

  # Epic 16: Onboarding & Progressive Disclosure (~15 points)
  # Time-to-value <60 seconds, demo walkthrough, feature unlocking
  # (Formerly Epic 14, renumbered after brainstorming expansion)
  epic-16: backlog
  epic-16-retrospective: optional

  # Epic 17: Tags & Grouping (~18 points)
  # User-defined tags for trip tracking, project expenses
  # (Formerly Epic 15, renumbered after brainstorming expansion)
  epic-17: backlog
  epic-17-retrospective: optional

  # Epic 18: Achievements & Milestones (~12 points)
  # Ethical gamification - celebrate progress without shame
  # (Formerly Epic 16, renumbered after brainstorming expansion)
  epic-18: backlog
  epic-18-retrospective: optional

  # ============================================================================
  # FUTURE BACKLOG (Post-Launch)
  # These epics are deferred until after MVP launch
  # ============================================================================

  # Epic F1: Subscription & Monetization
  # 3-tier model (Free/Pro/Max), Mercado Pago integration
  epic-f1-subscription: future-backlog

  # Epic F2: Household Sharing - MOVED to Epic 14c (see above)
  # epic-f2-household-sharing: moved-to-14c

  # Epic F3: Card Statement Scanning
  # Upload card statement → extract multiple transactions
  epic-f3-card-statement: future-backlog

  # Epic F4: Mobile Native App
  # iOS + Android native apps
  epic-f4-mobile-native: future-backlog

  # Epic F5: Insight Avatars
  # Personality-based insight delivery
  epic-f5-insight-avatars: future-backlog

  # Epic F6: Analytics Dashboard & Scheduled Insights
  # Deferred features from Epic 10 architecture session (2025-12-17)
  # Includes: Weekly/Monthly Summary Views, Scheduled Push Notifications, Reports Section
  # Requires Cloud Functions for scheduling (beyond ADR-015 client-side scope)
  # Archived references: docs/sprint-artifacts/epic10/_archive/
  epic-f6-analytics-dashboard-scheduled-insights: future-backlog
