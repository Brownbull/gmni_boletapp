# Story 14.4: Quick Save Path

**Status:** ready-for-dev
**Points:** 3
**Epic:** 14 - Core Implementation
**Dependencies:** Story 14.3 (Scan Overlay Flow)

---

## Story

As a **user with a high-confidence scan**,
I want **a streamlined Quick Save decision flow with satisfying animations**,
so that **I can save receipts quickly while feeling good about the interaction**.

## Acceptance Criteria

1. **Quick Save card** displays after scan overlay completes for high-confidence scans (>=85%)
2. **Save confirmation animation** - spring animation on successful save
3. **Edit path alternative** clearly available as secondary option
4. **Integration with scan overlay** - smooth transition from overlay to Quick Save card
5. **Trust Merchant prompt** appears after Quick Save if new merchant
6. **Reduced motion support** - instant feedback without animation when preferred

## Tasks / Subtasks

- [ ] Task 1: Enhance QuickSaveCard with animations (AC: #1, #2)
  - [ ] Add spring animation to save button on confirm
  - [ ] Add success checkmark animation
  - [ ] Use ANIMATION.EASING.SPRING from constants

- [ ] Task 2: Implement edit path styling (AC: #3)
  - [ ] Style "Editar" as secondary/ghost button
  - [ ] Add subtle hover animation
  - [ ] Clear visual hierarchy (Save primary, Edit secondary)

- [ ] Task 3: Integrate with scan overlay (AC: #4)
  - [ ] Smooth transition from ScanOverlay to QuickSaveCard
  - [ ] Card slides up from bottom
  - [ ] Overlay fades out as card appears

- [ ] Task 4: Handle Trust Merchant prompt (AC: #5)
  - [ ] After Quick Save, check if merchant is new
  - [ ] Show TrustMerchantPrompt if new merchant
  - [ ] Chain animations: Save ‚Üí Success ‚Üí TrustPrompt

- [ ] Task 5: Add reduced motion support (AC: #6)
  - [ ] Use useReducedMotion hook
  - [ ] Instant state changes without animation
  - [ ] Still show success feedback (checkmark without animation)

- [ ] Task 6: Write tests
  - [ ] Test animation triggers
  - [ ] Test transition from overlay
  - [ ] Test Trust Merchant integration
  - [ ] Test reduced motion behavior

## Dev Notes

### Existing Component

**From src/components/scan/QuickSaveCard.tsx:**
- Already implements 85% confidence threshold
- Already has Save/Edit buttons
- Uses weighted confidence scoring
- Needs animation enhancements

### Animation Specifications

**From motion-design-system.md:**
- Save button: Spring animation (400ms, cubic-bezier(0.34, 1.56, 0.64, 1))
- Success checkmark: Scale from 0 to 1 with spring
- Card entry: Slide up + fade in (300ms ease-out)

### Transition Flow

```
[Scan Overlay: ready]
    ‚Üí [Overlay fades out, QuickSaveCard slides up]
    ‚Üí [User taps Save]
    ‚Üí [Spring animation on button]
    ‚Üí [Success checkmark appears]
    ‚Üí [Trust Merchant prompt if new]
    ‚Üí [Navigate to Home or next scan]
```

### Integration Points

- `useScanOverlayState` - Listen for "ready" state
- `QuickSaveCard` - Add animation props
- `TrustMerchantPrompt` - Chain after save success
- `confetti.ts` - Optional celebration on save

### References

- [Source: docs/sprint-artifacts/epic14/tech-context-epic14.md#Story 14.4]
- [Source: src/components/scan/QuickSaveCard.tsx - Existing component]
- [Source: docs/uxui/motion-design-system.md#Celebration animations]

---

## Atlas Workflow Analysis

> üó∫Ô∏è This section was generated by Atlas workflow chain analysis

### Affected Workflows

- **Quick Save Flow (#6)**: Core flow - this story enhances the UX
- **Trust Merchant Flow (#7)**: Triggered after Quick Save for new merchants
- **Insight Generation Flow (#5)**: Insight appears after save completes

### Downstream Effects to Consider

- Save success triggers Insight Generation (async side-effect)
- Trust Merchant prompt must not interfere with insight display
- Animation timing must not delay the actual save operation

### Testing Implications

- **Existing tests to verify:** QuickSaveCard.test.tsx, confidence scoring tests
- **New scenarios to add:** Animation timing, overlay-to-card transition, Trust Merchant chain

### Workflow Chain Visualization

```
[Scan Overlay: ready] ‚Üí [THIS STORY: Quick Save Path] ‚Üí [Save] ‚Üí [Trust Merchant Prompt] ‚Üí [Insight Generation]
```

---

## Dev Agent Record

### Agent Model Used

_To be filled by dev agent_

### Completion Notes List

_To be filled during implementation_

### File List

_To be filled during implementation_
